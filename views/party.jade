extends layout

block content
  script(src="/js/player.js")
  script(type="text/javascript").
    $(function(){
        player = new Player(!{JSON.stringify(isHost)});
        console.log(!{JSON.stringify(party)});
        player.initializeFromParty(!{JSON.stringify(party)});
        
        player.resizeQueue();
    });
  .site-wrapper
      .site-wrapper-inner
          .cover-container
            .masthead.clearfix(id="header")
              .inner
                .masthead-brand
                  img.img-rounded(src="/img/dodge.jpg", width="50px", style="float:left;margin-right:3px;")
                  h3.pull-left Such Jukebox
            .inner.cover
                .on-top-queue(id="on-top-queue")
                    a(href="#", id="invite-others-btn", class="btn btn-info btn-sm" data-container="body", data-toggle="popover", data-placement="bottom")
                        span(class="glyphicon glyphicon-envelope margined-glyphicon")
                        |Invite Guests
                ul.list-group.queue(id="song-queue")
                    ul.list-group(id="queued-songs")        
                .player-controls(id="player-container")
                    p.now-playing Now Playing
                    span.label.label-default.guest-only(id="song-votes-to-skip", style="margin-left: 6px;")
                        |3 Votes to Skip
                    .player-btns.inline-block
                      a.host-only(id="play-btn" class="btn btn-info btn-lg player-btn")
                          span(class="glyphicon glyphicon-play")
                      a.host-only(id="pause-btn", class="btn btn-info btn-lg player-btn", style="display:none;")
                          span(class="glyphicon glyphicon-pause")
                      a.host-only(id="next-song-btn", class="btn btn-info btn-lg player-btn")
                          span(class="glyphicon glyphicon-forward")
                      a.guest-only(id="vote-skip-song-btn", class="btn btn-info btn-lg player-btn")
                          span(class="glyphicon glyphicon-forward")
                          |Skip
                    .song-info
                        .song-icon(id="current-song-icon")
                        .song-details
                            p(id="current-song-title")
                            p(id="current-song-artist")
                    .progress.progress-striped.active.host-only(id="current-song-progress")
                        .progress-bar.progress-bar-info(role="progressbar", aria-valuenow="60", aria-valuemin="0", aria-valuemax="100", style="width: 0;")
                    audio.host-only(preload="auto", id="player", autobuffer, ontimeupdate="player.updateTimeOfCurrentSong(this.currentTime, this.duration)")